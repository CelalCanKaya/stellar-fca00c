#![no_std]

use engine::Client as GameEngine;
use soroban_sdk::{contractimpl, BytesN, Env};

use crate::engine::{Direction, MapElement};

pub struct Solution;

mod engine {
    soroban_sdk::contractimport!(file = "../game_engine.wasm");
}

mod test;


#[contractimpl]
impl Solution {
    pub fn solve(env: Env, engine_id: BytesN<32>) {
        let engine = GameEngine::new(&env, &engine_id);

        engine.p_shoot();
        engine.p_turn(&Direction::UpRight);
        engine.p_move(&Some(4));
        engine.p_turn(&Direction::UpLeft);
        engine.p_shoot();
        engine.p_turn(&Direction::DownRight);
        engine.p_move(&Some(2));
        engine.p_turn(&Direction::UpRight);
        engine.p_shoot();
        engine.p_turn(&Direction::Down);
        engine.p_shoot();
        engine.p_turn(&Direction::DownRight);
        engine.p_move(&Some(1));
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(4));
        engine.p_harvest();
        engine.p_move(&Some(3));
        engine.p_turn(&Direction::Down);
        engine.p_shoot();
        engine.p_upgrade();
        engine.p_move(&Some(10));
        engine.p_shoot();
        engine.p_move(&Some(5));
        engine.p_shoot();
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(8));
        engine.p_turn(&Direction::UpRight);
        engine.p_shoot();
        engine.p_move(&Some(3));
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(2));
        engine.p_turn(&Direction::Up);
        engine.p_shoot();
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(3));
        engine.p_turn(&Direction::DownRight);
        engine.p_shoot();
        engine.p_move(&Some(1));
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(12));
        engine.p_harvest();
        engine.p_move(&Some(2));
        engine.p_turn(&Direction::Up);
        engine.p_shoot();
        engine.p_turn(&Direction::UpRight);
        engine.p_move(&Some(12));
        engine.p_turn(&Direction::Left);
        engine.p_shoot();
        engine.p_move(&Some(13));
        engine.p_turn(&Direction::Up);
        engine.p_shoot();
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(5));
        engine.p_turn(&Direction::Down);
        engine.p_shoot();
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(19));
        engine.p_turn(&Direction::UpRight);
        engine.p_shoot();
        engine.p_turn(&Direction::UpLeft);
        engine.p_move(&Some(7));
        engine.p_turn(&Direction::Up);
        engine.p_move(&Some(4));
        engine.p_shoot();
        engine.p_move(&Some(8));
        engine.p_turn(&Direction::Right);
        engine.p_shoot();
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(2));
        engine.p_turn(&Direction::UpLeft);
        engine.p_shoot();
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(4));
        engine.p_turn(&Direction::Up);
        engine.p_shoot();
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(7));
        engine.p_turn(&Direction::DownRight);
        engine.p_shoot();
        engine.p_turn(&Direction::DownLeft);
        engine.p_move(&Some(2));
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(1));
        engine.p_harvest();
        engine.p_move(&Some(1));
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(3));
        engine.p_shoot();
        engine.p_move(&Some(10));
        engine.p_harvest();
        engine.p_move(&Some(5));
        engine.p_turn(&Direction::Down);
        engine.p_shoot();
        engine.p_turn(&Direction::Up);
        engine.p_shoot();
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(5));
        engine.p_turn(&Direction::Down);
        engine.p_shoot();
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(1));
        engine.p_turn(&Direction::Up);
        engine.p_shoot();
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(12));
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(1));
        engine.p_shoot();
        engine.p_move(&Some(5));
        engine.p_turn(&Direction::Right);
        engine.p_shoot();
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(4));
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(1));
        engine.p_harvest();
        engine.p_move(&Some(1));
        engine.p_harvest();
        engine.p_move(&Some(1));
        engine.p_turn(&Direction::UpRight);
        engine.p_shoot();
        engine.p_turn(&Direction::Down);
        engine.p_shoot();
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(14));
        engine.p_turn(&Direction::UpRight);
        engine.p_shoot();
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(5));
        engine.p_turn(&Direction::Down);
        engine.p_shoot(); // 41 puan - 123 budget
        engine.p_turn(&Direction::DownLeft);
        engine.p_move(&Some(7));
        engine.p_turn(&Direction::Down);
        engine.p_shoot(); 
        engine.p_turn(&Direction::UpLeft);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(13));
        engine.p_shoot(); 
        engine.p_move(&Some(11));
        engine.p_turn(&Direction::Down);
        engine.p_shoot(); 
        engine.p_turn(&Direction::UpLeft);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(7));
        engine.p_turn(&Direction::DownLeft);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(10));
        engine.p_turn(&Direction::UpLeft);
        engine.p_shoot(); 
        engine.p_turn(&Direction::DownRight);
        engine.p_shoot();
        engine.p_move(&Some(1));
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(5));
        engine.p_shoot();
        engine.p_move(&Some(5));
        engine.p_shoot();
        engine.p_move(&Some(6));
        engine.p_shoot();
        engine.p_turn(&Direction::Right);
        engine.p_shoot();
        engine.p_turn(&Direction::DownLeft);
        engine.p_move(&Some(1));
        engine.p_turn(&Direction::Left);
        engine.p_move(&Some(15));
        engine.p_turn(&Direction::Right);
        engine.p_shoot();
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(10));
        engine.p_turn(&Direction::Left);
        engine.p_shoot();
        engine.p_turn(&Direction::Right);
        engine.p_shoot();
        engine.p_move(&Some(10));
        engine.p_harvest();
        engine.p_move(&Some(1));
        engine.p_turn(&Direction::DownRight);
        engine.p_shoot();
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(14));
        engine.p_turn(&Direction::DownRight);
        engine.p_shoot();
        engine.p_turn(&Direction::DownLeft);
        engine.p_move(&Some(2));
        engine.p_turn(&Direction::Down);
        engine.p_shoot();
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(3));
        engine.p_shoot();
        engine.p_move(&Some(7));
        engine.p_turn(&Direction::Left);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(5));
        engine.p_turn(&Direction::DownLeft);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(6));
        engine.p_turn(&Direction::Right);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Down);
        engine.p_move(&Some(4));
        engine.p_turn(&Direction::DownRight);
        engine.p_shoot();
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(13));
        engine.p_shoot(); 
        engine.p_turn(&Direction::DownRight);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Up);
        engine.p_move(&Some(6));
        engine.p_shoot(); 
        engine.p_turn(&Direction::Right);
        engine.p_shoot(); 
        engine.p_move(&Some(8));
        engine.p_turn(&Direction::Up);
        engine.p_move(&Some(4));
        engine.p_shoot(); 
        engine.p_move(&Some(4));
        engine.p_shoot(); 
        engine.p_turn(&Direction::Down);
        engine.p_shoot(); 
        engine.p_turn(&Direction::UpRight);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(4));
        engine.p_turn(&Direction::Down);
        engine.p_shoot(); 
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(8));
        engine.p_turn(&Direction::Left);
        engine.p_shoot(); 
        engine.p_turn(&Direction::UpRight);
        engine.p_move(&Some(7));
        engine.p_turn(&Direction::Up);
        engine.p_shoot(); 
        engine.p_turn(&Direction::UpRight);
        engine.p_move(&Some(4)); 
        engine.p_turn(&Direction::Right);
        engine.p_shoot(); 
        engine.p_move(&Some(5)); 
        engine.p_shoot(); 
        engine.p_turn(&Direction::Up);
        engine.p_move(&Some(3));
        engine.p_turn(&Direction::Left);
        engine.p_shoot();
        engine.p_turn(&Direction::Up);
        engine.p_move(&Some(2));
        engine.p_turn(&Direction::UpRight);
        engine.p_shoot();
        engine.p_move(&Some(4)); 
        engine.p_turn(&Direction::Right);
        engine.p_shoot(); 
        engine.p_move(&Some(6)); 
        engine.p_shoot(); 
        engine.p_move(&Some(14));
        engine.p_shoot();  
        engine.p_turn(&Direction::Up);
        engine.p_move(&Some(2));
        engine.p_shoot();  
        engine.p_turn(&Direction::DownRight);
        engine.p_move(&Some(5));
        engine.p_turn(&Direction::Right);
        engine.p_move(&Some(8)); 
        engine.p_shoot();  
        engine.p_move(&Some(4));
        engine.p_turn(&Direction::DownRight);
        engine.p_shoot();  
        engine.p_move(&Some(11));
        engine.p_turn(&Direction::Up);
        engine.p_shoot();  
        engine.p_turn(&Direction::UpRight);
        engine.p_move(&Some(8));
        engine.p_turn(&Direction::Left);
        engine.p_shoot();  
        engine.p_turn(&Direction::Down);
        engine.p_shoot();  

    }
}  